@page "/"
@using System.Security.Claims
@using Domain.Contracts
@using Domain.Models

@attribute [Authorize]
@inject IUserService _userService;


        Welcome to best forum.com @_user.UserName
        User details:
        @_user.Id
        @_user.UserName
        @_user.City
        @_user.Password
        @_user.Role
        @_user.BirthDate





@code {
    //TODO add on index forum view list of posts and click on them to see details etc 
    

    [CascadingParameter]
    public Task<AuthenticationState> AuthState { get; set; } = null!;

    private User? _user;
    //User object
    private string? roleTest;
    
    protected override async Task OnInitializedAsync()
    {
        AuthenticationState authState = await AuthState;
        ClaimsPrincipal user = authState.User;

        if (user.Identity.IsAuthenticated)
        {
            //get user clas base on the user identity
            _user = await _userService.GetUser(user.Identity.Name);
        }
    }

}